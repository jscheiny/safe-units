<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Defining Quantities | Safe Units</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>body{font-family:'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif;font-size:16px}body pre, body code{font-family:'Ubuntu Mono', monospace}h1, h2, h3, h4, h5, h6{font-family:'Open Sans', sans-serif}h2, h3{margin-left:-20px}body h1{color:#008075;margin:0;margin-left:-20px;padding-bottom:20px;padding-top:25px}.code-block_f1ad8bvh{border-radius:3px}.code-line_f18fcql6{color:#00998C}.link_f1f6a5l8{color:#BF8C0A;text-decoration:none}.link_f1f6a5l8:hover{color:#A67908;text-decoration:underline}.sidebar_f1rerch0{font-size:14px;min-width:250px;overflow:auto}.page-link_fm5hrlc{background:#E1E8ED;color:#293742;display:block;font-weight:bold;margin:5px 0;padding:5px 10px;text-decoration:none}.page-link_fm5hrlc:hover{background:#BFCCD6}.f1lk66qz{color:#008075}.fsmhnc8{color:#293742}.f7srduj{background:#008075;color:#F5F8FA}.f7srduj:hover{background:#008075;color:#CED9E0}.section-link_f11olvty{color:#293742;display:block;text-decoration:none}.section-link_f11olvty:hover{background:#E1E8ED}.section_fhlxm4f{padding:3px 20px}.subsection_f1uja56n{color:#5C7080;padding:3px 40px}.links_fyye2pd:last-child{margin-bottom:20px}.links_fyye2pd:first-child{margin-top:20px}.page_f1ujoio{display:flex;flex-direction:row;height:100vh;width:100vw}.contents_f1o0aovl{background:#EBF1F5;box-shadow:inset 15px 0 20px -20px #182026;flex:1 1 auto;overflow:auto;position:relative}.body_fkuzg3a{margin:0 25px 25px 45px;max-width:800px}.end-matter_f4p462k{border-top:1px solid #BFCCD6;font-size:14px;margin-top:20px;padding-top:20px}.license_fm83fiy{color:#738694;font-size:12px;margin-top:20px;text-align:center;text-shadow:0 1px 0 white}</style>
        <link rel="stylesheet" type="text/css" media="screen" href="styles/monokai.css" />
<link rel="stylesheet" type="text/css" media="screen" href="styles/normalize.css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono" rel="stylesheet">
    </head>
    <body><div class="page_f1ujoio" data-reactroot=""><div class="sidebar_f1rerch0"><div class="links_fyye2pd"><a class="f1lk66qz page-link_fm5hrlc" href="index.html">Safe Units</a></div><div class="links_fyye2pd"><a class="fsmhnc8 page-link_fm5hrlc" href="measures.html">Measures</a></div><div class="links_fyye2pd"><a class="fsmhnc8 page-link_fm5hrlc" href="generic-measures.html">Generic Measures</a></div><div class="links_fyye2pd"><a class="fsmhnc8 f7srduj page-link_fm5hrlc" href="defining-quantities.html#top">Defining Quantities</a><a class="section_fhlxm4f section-link_f11olvty" href="#dimensions-and-base-units">Dimensions and Base Units</a><a class="section_fhlxm4f section-link_f11olvty" href="#derived-quantities">Derived Quantities</a><a class="section_fhlxm4f section-link_f11olvty" href="#generic-quantities">Generic Quantities</a></div><div class="links_fyye2pd"><a class="fsmhnc8 page-link_fm5hrlc" href="limitations.html">Limitations</a></div><div class="links_fyye2pd"><a class="fsmhnc8 page-link_fm5hrlc" href="builtin.html">Built-in Units</a></div><a class="f1lk66qz page-link_fm5hrlc" href="https://github.com/jscheiny/safe-units">View on github</a></div><div class="contents_f1o0aovl"><div class="body_fkuzg3a"><div id="top"></div><h1 id="defining-quantities">Defining Quantities</h1><p>We define a <strong>quantity</strong> as the type of a measurement. Length, time, force, velocity, and pressure are all examples of quantities. Safe Units contains many built in quantities so we can write unit safe code easily:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">import</span> { Acceleration, Time, Velocity } <span class="hljs-keyword">from</span> <span class="hljs-string">"safe-units"</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computeAcceleration</span>(<span class="hljs-params">speed: Velocity, time: Time</span>): <span class="hljs-title">Acceleration</span> </span>{
   <span class="hljs-keyword">return</span> speed.over(time);
}
</code></pre><h2 id="dimensions-and-base-units">Dimensions and Base Units</h2><p>A <strong>dimension</strong> is the basis of a unit system. Units are composed of multiplying together multiple dimensions. For example, in the SI unit system there are the following dimensions, each corresponding to a base unit of the system</p><ul><li>Length - meters (m)</li><li>Mass - kilograms (kg)</li><li>Time - seconds (s)</li><li>Electric Current - amperes (A)</li><li>Temperature - kelvin (K)</li><li>Amount of substance - moles (mol)</li><li>Luminous intensity - candelas (cd)</li></ul><p>We can use the <code class="code-line_f18fcql6">Measure.dimension</code> static method to define base units for a given dimension. Here<!-- -->&#x27;<!-- -->s how Safe Units defines the dimensions and base units for length and time:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">const</span> meters = Measure.dimension(<span class="hljs-string">"length"</span>, <span class="hljs-string">"m"</span>);
<span class="hljs-keyword">const</span> Length = meters;
<span class="hljs-keyword">type</span> Length = <span class="hljs-keyword">typeof</span> meters;

<span class="hljs-keyword">const</span> seconds = Measure.dimension(<span class="hljs-string">"time"</span>, <span class="hljs-string">"s"</span>);
<span class="hljs-keyword">const</span> Time = seconds;
<span class="hljs-keyword">type</span> Time = <span class="hljs-keyword">typeof</span> seconds;
</code></pre><p>Let<!-- -->&#x27;<!-- -->s break this down:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">const</span> meters = Measure.dimension(<span class="hljs-string">"length"</span>, <span class="hljs-string">"m"</span>);
</code></pre><p>The first argument should be a unique string literal that defines the name of the dimension that we are creating. Note that if two calls to <code class="code-line_f18fcql6">Measure.dimension</code> are made with the same first argument, they will be considered the same dimension. The second argument is the symbol for the base unit of that dimension. This returns a <code class="code-line_f18fcql6">Measure</code> that represents 1 base unit (in the example above 1 meter and 1 second).</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">type</span> Length = <span class="hljs-keyword">typeof</span> meters;
</code></pre><p>Next, we create a type for the quantity that this unit represents. This type is useful for specifying the types of values we use later on (e.g. <code class="code-line_f18fcql6">const l: Length = Measure.of(30, feet)</code>). As noted above, a quantity is just the type of a measure so we define just that way.</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">const</span> Length = meters;
</code></pre><p>Finally, we create a value for the quantity. This is very useful for expressively deriving more quantities from this base unit as can be seen below.</p><h2 id="derived-quantities">Derived Quantities</h2><p>Now that we have a set of base units and dimensions, we can derive more interesting quantities by using the quantity values we defined just above. Let<!-- -->&#x27;<!-- -->s create velocity and acceleration quantities:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">const</span> Velocity = Length.over(Time);
<span class="hljs-keyword">type</span> Velocity = <span class="hljs-keyword">typeof</span> Velocity;

<span class="hljs-keyword">const</span> Acceleration = Velocity.over(Time);
<span class="hljs-keyword">type</span> Acceleration = <span class="hljs-keyword">typeof</span> Acceleration;
</code></pre><p>Now we can see how the values for <code class="code-line_f18fcql6">Length</code> and <code class="code-line_f18fcql6">Time</code> came in handy for writing this nicely. If we didn<!-- -->&#x27;<!-- -->t have values for this we would need to define velocity as:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">const</span> Velocity = meters.over(seconds);
</code></pre><p>While not technically wrong, <code class="code-line_f18fcql6">Length.over(Time)</code> is a much cleaner definition of velocity.</p><p>It<!-- -->&#x27;<!-- -->s worth noting that since our quantities defined thus far are instances of <code class="code-line_f18fcql6">Measure</code>, we can perform all the same operations on <code class="code-line_f18fcql6">Measures</code> on quantities. For example, here is how Safe Units defines the quantity of magnetic flux density:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">const</span> MagneticFluxDensity = Voltage.times(Time).over(Area);
</code></pre><p>This can then mirror how this measure might be computed:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computeMagneticFluxDensity</span>(<span class="hljs-params">
   voltage: Voltage,
   time: Time,
   area: Area,
</span>): <span class="hljs-title">MagneticFluxDensity</span> </span>{
   <span class="hljs-keyword">return</span> voltage.times(time).over(area);
}
</code></pre><h2 id="generic-quantities">Generic Quantities</h2><p>The examples in here are for creating dimensions and quantities for the built in <code class="code-line_f18fcql6">Measure</code> type. However, measures can be made for any numeric type (see <a class="link_f1f6a5l8" href="generic-measures.html">Generic Measures</a>). As such we may want to make our quantities generic as well. This can be easily done with the generic <code class="code-line_f18fcql6">LiftMeasure</code> type which takes a measure of a given unit and changes its numeric type.</p><p>For example, suppose we have a <code class="code-line_f18fcql6">WrappedNumber</code> type, we can change a <code class="code-line_f18fcql6">Velocity</code> quantity from operating on number measures to <code class="code-line_f18fcql6">WrappedNumber</code> measures as follows:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">type</span> WrappedVelocity = LiftMeasure&lt;Velocity, WrappedNumber&gt;
</code></pre><p>We could also just define the <code class="code-line_f18fcql6">Velocity</code> type to be generic in the first place. The recommended way of doing this is as follows:</p><pre><code class="hljs typescript code-block_f1ad8bvh"><span class="hljs-keyword">const</span> Velocity = Length.over(Time);
<span class="hljs-keyword">type</span> Velocity&lt;N = <span class="hljs-built_in">number</span>&gt; = LiftMeasure&lt;<span class="hljs-keyword">typeof</span> Velocity, N&gt;;
</code></pre><p>This way, we can use <code class="code-line_f18fcql6">Velocity</code> to refer to the quantity on numbers, but also use <code class="code-line_f18fcql6">Velocity&lt;WrappedNumber&gt;</code> to operate on <code class="code-line_f18fcql6">WrappedMeasure</code> types.</p><div class="end-matter_f4p462k"><a class="link_f1f6a5l8" href="https://github.com/jscheiny/safe-units">Safe Units</a> is developed by Jonah Scheinerman. Please <a class="link_f1f6a5l8" href="mailto:jonah@scheinerman.net">contact me</a> if you have questions or concerns.<div class="license_fm83fiy">Safe Units is distributed under the<!-- --> <a class="link_f1f6a5l8" href="https://opensource.org/licenses/MIT">MIT open source license</a>.<br/><br/>Copyright Â© <!-- -->2019<!-- --> by Jonah Scheinerman</div></div></div></div></div></body>
</html>